{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\kreet\\\\OneDrive\\\\Desktop\\\\HCI project codes\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\kreet\\\\OneDrive\\\\Desktop\\\\HCI project codes\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\kreet\\\\OneDrive\\\\Desktop\\\\HCI project codes\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\kreet\\\\OneDrive\\\\Desktop\\\\HCI project codes\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\kreet\\\\OneDrive\\\\Desktop\\\\HCI project codes\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\kreet\\\\OneDrive\\\\Desktop\\\\HCI project codes\\\\web\\\\src\\\\components\\\\Reservations.js\";\nimport React, { Component } from 'react';\nimport { Row, Col, Button, Card, Pagination } from 'react-bootstrap';\nimport { getReservations, deleteReservation } from '../Services';\nimport { toast } from 'react-toastify';\n\nvar Reservations =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Reservations, _Component);\n\n  function Reservations(props) {\n    var _this;\n\n    _classCallCheck(this, Reservations);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Reservations).call(this, props));\n\n    _this.updateReservations = function () {\n      var user = localStorage.getItem('user');\n\n      if (!user) {\n        _this.props.history.push('/');\n      } else {\n        user = JSON.parse(user);\n        getReservations(user._id).then(function (res) {\n          _this.setState({\n            reservations: res\n          }, function () {\n            return _this.paginateReservations();\n          });\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    };\n\n    _this.cancelReservation = function (id) {\n      var c = window.confirm(\"The reservation \" + id + \" will be deleted\");\n\n      if (c) {\n        deleteReservation(id).then(function (res) {\n          toast.success(\"Successfully removed reservation \" + id);\n\n          _this.updateReservations();\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    };\n\n    _this.paginateReservations = function () {\n      var items = [];\n      var offset = (_this.state.offset - 1) * 5;\n\n      var _loop = function _loop(number) {\n        var reservation = _this.state.reservations[number];\n\n        if (reservation) {\n          items.push(React.createElement(Row, {\n            style: {\n              width: '75%'\n            },\n            key: number,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 69\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 70\n            },\n            __self: this\n          }, React.createElement(Card, {\n            style: {\n              padding: 10,\n              marginTop: 10\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }, React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73\n            },\n            __self: this\n          }, \"Reference No : \", reservation._id)), React.createElement(\"hr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75\n            },\n            __self: this\n          }), React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }, \"From \", React.createElement(\"b\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }, reservation.from), \" to \", React.createElement(\"b\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }, reservation.to)), React.createElement(Col, {\n            align: \"right\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          }, reservation.date, \" \", reservation.time)), React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 80\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 81\n            },\n            __self: this\n          }, \"Train : \", reservation.train)), React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84\n            },\n            __self: this\n          }, \"Class : \", reservation.trainClass)), React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 87\n            },\n            __self: this\n          }, \"Quantity : \", reservation.qty)), React.createElement(\"hr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89\n            },\n            __self: this\n          }), React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90\n            },\n            __self: this\n          }, React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91\n            },\n            __self: this\n          }, \"Amount : \", reservation.amount.toFixed(2)), React.createElement(Col, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            },\n            __self: this\n          }, \"Discount : \", reservation.discount.toFixed(2)), React.createElement(Col, {\n            align: \"right\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            },\n            __self: this\n          }, React.createElement(\"b\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            },\n            __self: this\n          }, \"Total :\"), \" \", reservation.total.toFixed(2))), React.createElement(Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          }, React.createElement(Col, {\n            style: {\n              paddingTop: 10\n            },\n            align: \"right\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96\n            },\n            __self: this\n          }, React.createElement(Button, {\n            variant: \"danger\",\n            size: \"sm\",\n            onClick: function onClick() {\n              return _this.cancelReservation(reservation._id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          }, \"Cancel\")))))));\n        }\n      };\n\n      for (var number = offset; number < offset + 5; number++) {\n        _loop(number);\n      }\n\n      var paginateItems = [];\n      var lastPage = Math.ceil(_this.state.reservations.length / 5);\n\n      var _loop2 = function _loop2(number) {\n        paginateItems.push(React.createElement(Pagination.Item, {\n          key: number,\n          active: number === _this.state.offset,\n          onClick: function onClick() {\n            return _this.pageChange(number);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, number));\n      };\n\n      for (var number = 1; number <= lastPage; number++) {\n        _loop2(number);\n      }\n\n      _this.setState({\n        paginateItems: paginateItems,\n        items: items,\n        lastPage: lastPage\n      });\n    };\n\n    _this.pageChange = function (n) {\n      console.log(n);\n\n      _this.setState({\n        offset: n\n      }, function () {\n        return _this.paginateReservations();\n      });\n    };\n\n    _this.state = {\n      reservations: [],\n      items: [],\n      offset: 1,\n      lastPage: 1,\n      paginateItems: []\n    };\n    return _this;\n  }\n\n  _createClass(Reservations, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateReservations();\n    }\n  }, {\n    key: \"componentWillUpdate\",\n    value: function componentWillUpdate() {\n      var user = localStorage.getItem('user');\n\n      if (!user) {\n        this.props.history.push('/');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Row, {\n        style: {\n          alignItems: 'center',\n          justifyContent: 'center',\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, this.state.reservations.length <= 0 && React.createElement(Row, {\n        style: {\n          width: '75%',\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"You don't have any reservations yet!!!\")))), this.state.reservations.length > 0 && React.createElement(React.Fragment, null, React.createElement(Row, {\n        style: {\n          width: '75%',\n          paddingTop: 20,\n          paddingLeft: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Pagination.First, {\n        onClick: function onClick() {\n          return _this2.pageChange(1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), this.state.paginateItems, React.createElement(Pagination.Last, {\n        onClick: function onClick() {\n          return _this2.pageChange(_this2.state.lastPage);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }))), this.state.items.map(function (reservation, i) {\n        return reservation;\n      }), React.createElement(Row, {\n        style: {\n          width: '75%',\n          paddingTop: 20,\n          paddingLeft: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Pagination.First, {\n        onClick: function onClick() {\n          return _this2.pageChange(1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), this.state.paginateItems, React.createElement(Pagination.Last, {\n        onClick: function onClick() {\n          return _this2.pageChange(_this2.state.lastPage);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Reservations;\n}(Component);\n\nexport default Reservations;","map":{"version":3,"sources":["C:\\Users\\kreet\\OneDrive\\Desktop\\HCI project codes\\web\\src\\components\\Reservations.js"],"names":["React","Component","Row","Col","Button","Card","Pagination","getReservations","deleteReservation","toast","Reservations","props","updateReservations","user","localStorage","getItem","history","push","JSON","parse","_id","then","res","setState","reservations","paginateReservations","catch","err","console","log","cancelReservation","id","c","window","confirm","success","items","offset","state","number","reservation","width","padding","marginTop","from","to","date","time","train","trainClass","qty","amount","toFixed","discount","total","paddingTop","paginateItems","lastPage","Math","ceil","length","pageChange","n","alignItems","justifyContent","paddingLeft","map","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { Row, Col, Button, Card, Pagination } from 'react-bootstrap'\nimport { getReservations, deleteReservation } from '../Services'\nimport { toast } from 'react-toastify'\n\nclass Reservations extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            reservations: [],\n            items: [],\n            offset: 1,\n            lastPage: 1,\n            paginateItems: []\n        };\n    }\n\n    componentDidMount() {\n        this.updateReservations()\n    }\n\n    componentWillUpdate() {\n        var user = localStorage.getItem('user')\n        if (!user) {\n            this.props.history.push('/')\n        }\n    }\n\n    updateReservations = () => {\n        var user = localStorage.getItem('user')\n        if (!user) {\n            this.props.history.push('/')\n        } else {\n            user = JSON.parse(user)\n            getReservations(user._id)\n                .then(res => {\n                    this.setState({ reservations: res }, () => this.paginateReservations())\n                })\n                .catch(err => {\n                    console.log(err)\n                })\n        }\n    }\n\n    cancelReservation = id => {\n        var c = window.confirm(\"The reservation \" + id + \" will be deleted\")\n        if (c) {\n            deleteReservation(id)\n                .then(res => {\n                    toast.success(\"Successfully removed reservation \" + id)\n                    this.updateReservations()\n                })\n                .catch(err => {\n                    console.log(err)\n                })\n        }\n    }\n\n    paginateReservations = () => {\n        let items = [];\n        const offset = (this.state.offset - 1) * 5\n\n        for (let number = offset; number < offset + 5; number++) {\n            const reservation = this.state.reservations[number]\n            if (reservation) {\n                items.push(\n                    <Row style={{ width: '75%' }} key={number}>\n                        <Col>\n                            <Card style={{ padding: 10, marginTop: 10 }}>\n                                <Row>\n                                    <Col>Reference No : {reservation._id}</Col>\n                                </Row>\n                                <hr />\n                                <Row>\n                                    <Col>From <b>{reservation.from}</b> to <b>{reservation.to}</b></Col>\n                                    <Col align='right'>{reservation.date} {reservation.time}</Col>\n                                </Row>\n                                <Row>\n                                    <Col>Train : {reservation.train}</Col>\n                                </Row>\n                                <Row>\n                                    <Col>Class : {reservation.trainClass}</Col>\n                                </Row>\n                                <Row>\n                                    <Col>Quantity : {reservation.qty}</Col>\n                                </Row>\n                                <hr />\n                                <Row>\n                                    <Col>Amount : {reservation.amount.toFixed(2)}</Col>\n                                    <Col>Discount : {reservation.discount.toFixed(2)}</Col>\n                                    <Col align='right'><b>Total :</b> {reservation.total.toFixed(2)}</Col>\n                                </Row>\n                                <Row>\n                                    <Col style={{ paddingTop: 10 }} align='right'>\n                                        <Button variant=\"danger\" size=\"sm\" onClick={() => this.cancelReservation(reservation._id)}>Cancel</Button>\n                                    </Col>\n                                </Row>\n                            </Card>\n                        </Col>\n                    </Row>\n                )\n            }\n        }\n        let paginateItems = [];\n        const lastPage = Math.ceil(this.state.reservations.length / 5)\n        for (let number = 1; number <= lastPage; number++) {\n            paginateItems.push(\n                <Pagination.Item key={number} active={number === this.state.offset} onClick={() => this.pageChange(number)}>\n                    {number}\n                </Pagination.Item>,\n            );\n        }\n        this.setState({ paginateItems: paginateItems, items: items, lastPage: lastPage })\n    }\n\n    pageChange = n => {\n        console.log(n)\n        this.setState({ offset: n }, () => this.paginateReservations())\n    }\n\n    render() {\n        return (\n            <Row style={{ alignItems: 'center', justifyContent: 'center', width: '100%' }}>\n                {this.state.reservations.length <= 0 &&\n                    <Row style={{ width: '75%', padding: 10 }}>\n                        <Col>\n                            <Card>\n                                <Card.Body>You don't have any reservations yet!!!</Card.Body>\n                            </Card>\n                        </Col>\n                    </Row>\n                }\n                {this.state.reservations.length > 0 &&\n                    <>\n                        <Row style={{ width: '75%', paddingTop: 20, paddingLeft: 15 }}>\n                            <Pagination>\n                                <Pagination.First onClick={() => this.pageChange(1)} />\n                                {this.state.paginateItems}\n                                <Pagination.Last onClick={() => this.pageChange(this.state.lastPage)} />\n                            </Pagination>\n                        </Row>\n                        {this.state.items.map((reservation, i) => {\n                            return (\n                                reservation\n                            )\n                        })}\n                        <Row style={{ width: '75%', paddingTop: 20, paddingLeft: 15 }}>\n                            <Pagination>\n                                <Pagination.First onClick={() => this.pageChange(1)} />\n                                {this.state.paginateItems}\n                                <Pagination.Last onClick={() => this.pageChange(this.state.lastPage)} />\n                            </Pagination>\n                        </Row>\n                    </>\n                }\n            </Row>\n        );\n    }\n}\n\nexport default Reservations;"]},"metadata":{},"sourceType":"module"}